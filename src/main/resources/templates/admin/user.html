<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>DASHMIN - Bootstrap Admin Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <!--    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">-->
    <link href="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/assets/owl.carousel.min.css" rel="stylesheet">
    <!--    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />-->
    <link href="https://cdn.jsdelivr.net/npm/tempusdominus-bootstrap@4/dist/css/tempusdominus-bootstrap.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link th:href="@{/static/css/footer/bootrap.css}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link th:href="@{/static/css/admin/style.css}" rel="stylesheet">
    <style>

        #pagination {
            display: flex;
            float: right;
        }
        /* CSS đơn giản cho table trên mobile */
        * {
            box-sizing: border-box;
            font-family: "Avenir", "Helvetica", sans-serif;
        }

        body {
            background-color: #f9f9f9;
        }

        table {
            border-collapse: collapse;
            text-align: left;
            width: 100%;
        }
        table tr {
            background: white;
            border-bottom: 1px solid
        }
        table th, table td {
            padding: 10px 20px;
        }
        table td span {
            background: #eee;
            color: dimgrey;
            display: none;
            font-size: 10px;
            font-weight: bold;
            padding: 5px;
            position: absolute;
            text-transform: uppercase;
            top: 0;
            left: 0;
        }
        .search-container {
            float: right;

        }
        .search-container button {
            float: right;
            padding: 3px 6px;

            margin-right: 16px;
            background: #ddd;
            font-size: 17px;
            border: none;
            cursor: pointer;
        }

        @media(max-width: 768px) {
            .searchUser
            {
                width: 240px!important;
            }
            table thead {
                left: -9999px;
                position: absolute;
                visibility: hidden;
            }
            table tr {
                border-bottom: 0;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                margin-bottom: 40px;

            }
            table td {
                word-break: break-all;
                border: 1px solid;
                margin: 0 -1px -1px 0;
                padding-top: 35px;
                position: relative;
                width: 50%;
            }
            table td span {
                display: block;
            }
        }

    </style>
</head>

<body>
<div class="container-xxl position-relative bg-white d-flex p-0">
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Sidebar Start -->
    <div class="sidebar pe-4 pb-3">
        <nav class="navbar bg-light navbar-light">
            <a href="index.html" class="navbar-brand mx-4 mb-3">
                <h3 class="text-primary"><i class="fa fa-hashtag me-2"></i>DASHMIN</h3>
            </a>
            <div class="d-flex align-items-center ms-4 mb-4">
                <div class="position-relative">
                    <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                    <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                </div>
                <div class="ms-3">
                    <h6 class="mb-0">Jhon Doe</h6>
                    <span>Admin</span>
                </div>
            </div>
            <div class="navbar-nav w-100">
                <a href="index.html" class="nav-item nav-link "><i class="fa fa-tachometer-alt me-2"></i>Dashboard</a>

                <a href="Movie" class="nav-item nav-link"><i class="bi bi-film"></i>Add Movie</a>
                <a href="form.html" class="nav-item nav-link"><i class="bi bi-calendar"></i>Add showtime</a>
                <a href="Users" class="nav-item nav-link active"><i class="fa fa-table me-2"></i>User</a>
                <a href="Threat" class="nav-item nav-link"><i class="fa fa-chart-bar me-2"></i>Threat</a>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown"><i class="far fa-file-alt me-2"></i>Pages</a>
                    <div class="dropdown-menu bg-transparent border-0">
                        <a href="signin.html" class="dropdown-item">Sign In</a>
                        <a href="signup.html" class="dropdown-item">Sign Up</a>
                        <a href="404.html" class="dropdown-item">404 Error</a>
                        <a href="blank.html" class="dropdown-item">Blank Page</a>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <!-- Sidebar End -->


    <!-- Content Start -->
    <div class="content">
        <!-- Navbar Start -->
        <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
            <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                <h2 class="text-primary mb-0"><i class="fa fa-hashtag"></i></h2>
            </a>
            <a href="#" class="sidebar-toggler flex-shrink-0">
                <i class="fa fa-bars"></i>
            </a>
            <form class="d-none d-md-flex ms-4">
                <input class="form-control border-0" type="search" placeholder="Search">
            </form>
            <div class="navbar-nav align-items-center ms-auto">
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="fa fa-envelope me-lg-2"></i>
                        <span class="d-none d-lg-inline-flex">Message</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                        <a href="#" class="dropdown-item">
                            <div class="d-flex align-items-center">
                                <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                <div class="ms-2">
                                    <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                    <small>15 minutes ago</small>
                                </div>
                            </div>
                        </a>
                        <hr class="dropdown-divider">
                        <a href="#" class="dropdown-item">
                            <div class="d-flex align-items-center">
                                <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                <div class="ms-2">
                                    <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                    <small>15 minutes ago</small>
                                </div>
                            </div>
                        </a>
                        <hr class="dropdown-divider">
                        <a href="#" class="dropdown-item">
                            <div class="d-flex align-items-center">
                                <img class="rounded-circle" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                                <div class="ms-2">
                                    <h6 class="fw-normal mb-0">Jhon send you a message</h6>
                                    <small>15 minutes ago</small>
                                </div>
                            </div>
                        </a>
                        <hr class="dropdown-divider">
                        <a href="#" class="dropdown-item text-center">See all message</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                        <i class="fa fa-bell me-lg-2"></i>
                        <span class="d-none d-lg-inline-flex">Notificatin</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                        <a href="#" class="dropdown-item">
                            <h6 class="fw-normal mb-0">Profile updated</h6>
                            <small>15 minutes ago</small>
                        </a>
                        <hr class="dropdown-divider">
                        <a href="#" class="dropdown-item">
                            <h6 class="fw-normal mb-0">New user added</h6>
                            <small>15 minutes ago</small>
                        </a>
                        <hr class="dropdown-divider">
                        <a href="#" class="dropdown-item">
                            <h6 class="fw-normal mb-0">Password changed</h6>
                            <small>15 minutes ago</small>
                        </a>
                        <hr class="dropdown-divider">
                        <a href="#" class="dropdown-item text-center">See all notifications</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                        <img class="rounded-circle me-lg-2" src="img/user.jpg" alt="" style="width: 40px; height: 40px;">
                        <span class="d-none d-lg-inline-flex">John Doe</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                        <a href="#" class="dropdown-item">My Profile</a>
                        <a href="#" class="dropdown-item">Settings</a>
                        <a href="#" class="dropdown-item">Log Out</a>
                    </div>
                </div>
            </div>
        </nav>
        <!-- Navbar End -->
        <div class="content-wrapper" >
            <div class="container" style="padding: 30px 30px 30px 30px">
                <select class="custom-select displayvalue" style="width: 200px">

                    <option value="5">Hiển thị 5</option>
                    <option value="10">Hiển thị 10</option>
                    <option value="15">Hiển thị 15</option>
                    <option value="20">Hiển thị 20</option>
                </select>
                <div class="search-container">
                    <form id="searchForm" class="input-group" th:action="@{/Admin/Users}" method="GET" accept-charset="UTF-8">
                        <input type="text" name="username" id="divSearch" class="form-control" placeholder="Nhập tên">

                        <button class="btn btn-primary" type="submit" id="btnSearch">Tìm kiếm</button>

                    </form>
                </div>

                <div class="alert alert-danger userdanger" role="alert" style="margin-top: 40px" hidden="" >

                </div>


                <table border="1"  class=" table-bordered  userTable table-striped " >

                    <thead>
                    <tr>
                        <th>Email</th>
                        <th>Tên</th>
                        <th >Ngày sinh</th>
                        <th>Điện thoại</th>
                        <th>Giới tính</th>
                        <th>Địa chỉ</th>
                        <th>Tác vụ</th>

                    </tr>
                    </thead>
                    <tbody class="bodyUser">
                    <tr th:each="u:${usersList}" class="contentPage">
                        <td th:text="${u.email}"><span>Email </span></td>
                        <td th:text="${u.name}"><span>Tên</span> </td>
                        <td   th:text="${#dates.format(u.dob, 'dd/MM/yyyy')}" style="white-space: nowrap"><span>Ngày sinh</span><p class="dobuser"></p></td>
                        <td th:text="${u.phone}"><span>Số điện thoại</span> </td>
                        <td th:text="${u.gender}"><span>Giới tính</span></td>
                        <td th:text="${u.address}"><span>Địa chỉ</span></td>
                        <td>
                            <a class="btn btn-warning" style="color: white;float: left" href="Manageuser?action=Detail&email=${u.email}">Chi tiết</a>
                        </td>
                    </tr>
                    </tbody>
                </table>

                </br>

                <ul id="pagination"></ul>

            </div>

        </div>

        <script>


        </script>

        <script src="https://code.jquery.com/jquery-3.2.1.js" ></script>
        <!-- JS tạo nút bấm di chuyển trang start -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.4.2/jquery.twbsPagination.min.js"></script>
        <script type="text/javascript">

            // $(".searchUser").keyup(function () {
            //     var value = $(this).val();
            //     $.ajax({
            //         type: "POST",
            //         url: "/Admin/Search",
            //         cache: false,
            //         data: { name: value, paramLang: paramLang }, // Gửi tham số paramLang
            //         success: function (data) {
            //             if (data != "") {
            //                 $(".userTable").removeAttr("hidden");
            //                 $(".userdanger").attr("hidden", true);
            //                 $(".bodyUser").html(data);
            //                 totalRows = $(".bodyUser .contentPage").length;
            //                 pagination();
            //             } else {
            //                 $(".userdanger").text("Không tìm thấy người dùng với từ khóa: " + value);
            //                 $(".userTable").attr("hidden", true);
            //                 $(".userdanger").removeAttr("hidden");
            //                 totalRows = 0;
            //                 pagination();
            //             }
            //         },
            //         error: function (error) {
            //             alert("Có lỗi xảy ra khi gửi yêu cầu tìm kiếm!");
            //             console.log(error);
            //         }
            //     });
            // });
            //
            // $(".displayvalue").change(function (index) {
            //     pageSize = $(this).val();
            //     pagination();
            //
            // });
            var pageSize = 5;
            var totalRows = [[${usersList.size()}]];

            function pagination()
            {
///** Cần truyền giá trị vào đây **//
                showPage = function (page) {
                    $(".contentPage").hide();
                    $(".contentPage").each(function (n) {
                        if (n >= pageSize * (page - 1) && n < pageSize * page)
                            $(this).show();
                        $(".first a").html("first");
                    });
                }
                showPage(1);
                ///** Cần truyền giá trị vào đây **///

                var btnPage = Math.ceil(totalRows / pageSize); // Số nút bấm hiển thị di chuyển trang
                var iTotalPages = Math.ceil(totalRows / pageSize);

                if (iTotalPages > 1) {

                    var currentPage = $("#pagination").twbsPagination('getCurrentPage');
                    $("#pagination").twbsPagination('destroy');
                    $('#pagination').twbsPagination({
                        totalPages: iTotalPages,
                        visiblePages: btnPage,
                        onPageClick: function (event, page) {
                            /* console.info(page); */
                            showPage(page);
                        }
                    });

                } else {
                    $("#pagination").twbsPagination('destroy');
                    //if all item on the 1st page
                }


            }
            jQuery(document).ready(function ($) {

                showPage = function (page) {
                    $(".contentPage").hide();
                    $(".contentPage").each(function (n) {
                        if (n >= pageSize * (page - 1) && n < pageSize * page)
                            $(this).show();
                        $(".first a").html("first");
                    });
                }
                showPage(1);
                ///** Cần truyền giá trị vào đây **///

                var btnPage = Math.ceil(totalRows / pageSize); // Số nút bấm hiển thị di chuyển trang
                var iTotalPages = Math.ceil(totalRows / pageSize);
                if (iTotalPages > 1) {
                    var obj = $('#pagination').twbsPagination({
                        totalPages: iTotalPages,
                        visiblePages: btnPage,
                        onPageClick: function (event, page) {
                            /* console.info(page); */
                            showPage(page);
                        }
                    });
                }
                /*console.info(obj.data());*/
            });

        </script>



            <!-- Footer Start -->
        <div class="container-fluid pt-4 px-4">
            <div class="bg-light rounded-top p-4">
                <div class="row">
                    <div class="col-12 col-sm-6 text-center text-sm-start">
                        &copy; <a href="#">Your Site Name</a>, All Right Reserved.
                    </div>
                    <div class="col-12 col-sm-6 text-center text-sm-end">
                        <!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
                        Designed By <a href="https://htmlcodex.com">HTML Codex</a>
                        </br>
                        Distributed By <a class="border-bottom" href="https://themewagon.com" target="_blank">ThemeWagon</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->
    </div>
    <!-- Content End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</div>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="lib/chart/chart.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/waypoints/waypoints.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>
<script src="lib/tempusdominus/js/moment.min.js"></script>
<script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
<script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/easing.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.38/moment-timezone.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.1.2/js/tempusdominus-bootstrap-4.min.js"></script>


<!-- Template Javascript -->
<script src="/static/js/Admin.js"></script>
</body>

</html>